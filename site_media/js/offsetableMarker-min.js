function OffsetableMarker(d,g,f,a,e,c,b){this.bdcc_poi=d;this.bdcc_color=f||"";this.bdcc_width=a||1;this.bdcc_opacity=e||1;this.bdcc_dx=c||0;this.bdcc_dy=b||0;this.bdcc_line=null;if(!g){g={}}g.bouncy=false;g.dragCrossMove=true;g.bounceGravity=10000;GMarker.call(this,d,g)}OffsetableMarker.prototype=new GMarker(new GLatLng(0,0));OffsetableMarker.prototype.initialize=function(c){GMarker.prototype.initialize.call(this,c);this.bdcc_map=c;if((this.bdcc_dx!=0)||(this.bdcc_dy!=0)){var b=c.fromLatLngToDivPixel(this.bdcc_poi);b.x+=this.bdcc_dx;b.y+=this.bdcc_dy;this.setLatLng(c.fromDivPixelToLatLng(b))}var a=this;GEvent.addListener(this,"dragstart",this.onDragStart);GEvent.addListener(this,"drag",this.onDrag);GEvent.addListener(this,"dragend",this.onDrag);GEvent.addListener(this,"dblclick",this.onDblclick);GEvent.addListener(this.bdcc_map,"zoomend",function(d,f){var e=a.bdcc_map.fromLatLngToDivPixel(a.bdcc_poi);e.x+=a.bdcc_dx;e.y+=a.bdcc_dy;a.setLatLng(a.bdcc_map.fromDivPixelToLatLng(e));a.redraw.call(a)})};OffsetableMarker.prototype.onDragStart=function(){if(!this.bdcc_map.getInfoWindow().isHidden()){this.bdcc_map.closeInfoWindow()}};OffsetableMarker.prototype.onDrag=function(){var a=this.bdcc_map.fromLatLngToDivPixel(this.getPoint());var b=this.bdcc_map.fromLatLngToDivPixel(this.bdcc_poi);this.bdcc_dx=a.x-b.x;this.bdcc_dy=a.y-b.y;this.redraw()};OffsetableMarker.prototype.onDblclick=function(){if(!this.bdcc_map.getInfoWindow().isHidden()){this.bdcc_map.closeInfoWindow()}this.setLatLng(this.bdcc_poi);this.bdcc_remLine();this.bdcc_dx=0;this.bdcc_dy=0;var a=this;window.setTimeout(function(){a.onDragStart.call(a)},100);return false};OffsetableMarker.prototype.remove=function(){this.bdcc_remLine();GMarker.prototype.remove.call(this)};OffsetableMarker.prototype.hide=function(){this.bdcc_remLine();GMarker.prototype.hide.call(this)};OffsetableMarker.prototype.bdcc_remLine=function(){if(this.bdcc_line!=null){this.bdcc_map.removeOverlay(this.bdcc_line);this.bdcc_line=null}};OffsetableMarker.prototype.copy=function(){return new OffsetableMarker(this.bdcc_poi,this.bdcc_opts,this.bdcc_color,this.bdcc_width,this.bdcc_opacity,this.bdcc_dx,this.bdcc_dy)};OffsetableMarker.prototype.redraw=function(b){this.bdcc_remLine();if((this.bdcc_dx!=0)||(this.bdcc_dy!=0)){var d=new Array();d[0]=this.bdcc_poi;var c=this.bdcc_map.fromLatLngToDivPixel(this.bdcc_poi);c.x+=this.bdcc_dx;c.y+=this.bdcc_dy;d[1]=this.bdcc_map.fromDivPixelToLatLng(c);var a=this.bdcc_color;if(a.length<7){a=this.bdcc_map.getCurrentMapType().getTextColor()}this.bdcc_line=new GPolyline(d,a,this.bdcc_width,this.bdcc_opacity);this.bdcc_map.addOverlay(this.bdcc_line)}GMarker.prototype.redraw.call(this,b)};